<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
<!-- -->

<act_window name="SMS Multiple Partners"
    res_model="esms.compose.multi"
    src_model="res.partner"
    key2="client_action_multi" 
    view_mode="form" target="new" 
    view_type="form"
    multi="True"
    id="act_send_sms_partner_multi_menu" />

<act_window name="SMS Partner"
    res_model="esms.compose"
    src_model="res.partner"
    key2="client_action_multi" 
    view_mode="form" target="new" 
    view_type="form"
    context="{'default_field_id':'mobile','default_to_number':mobile,'default_record_id':active_id,'default_model_id':active_model}"
    id="act_send_sms_partner_menu" />

<!-- ####################################################################### -->

      <record model="ir.ui.view" id="esms_compose_multi_view">
          <field name="name">esms compose multi view</field>
          <field name="model">esms.compose.multi</field>
          <field name="arch" type="xml">
      	      <form>
      	          <group>
      	              <field name="sms_gateway"  widget="selection"/>
      	              <field name="sms_content"/>
      	          </group>
                  <footer>
                      <button type="object" name="send_sms_multi" string="Mass Send SMS"/>
                  </footer>      	          
      	      </form>
      	  </field>
      </record>

      <record model="ir.ui.view" id="esms_compose_view">
          <field name="name">esms compose view</field>
          <field name="model">esms.compose</field>
          <field name="arch" type="xml">
      	      <form>
      	          <span style="color:red;font-size:20px;"><field name="error_message"/></span>
      	          <group>
      	              <field name="sms_gateway" widget="selection"/>
      	              <field name="to_number" />
      	              <field name="sms_content"/>
      	          </group>
                  <footer>
                      <button type="object" name="send_entity" string="Send SMS"/>
                  </footer>      	          
      	      </form>
      	  </field>
      </record>

<!-- ################################################################################### -->

      <record model="ir.ui.view" id="esms_conf_form_view">
          <field name="name">esms conf form view</field>
          <field name="model">esms.accounts</field>
          <field name="arch" type="xml">
      	      <form>
      	          <group>
      	              <field name="name"/>
      	              <field name="account_gateway" widget="selection"/>
      	              <field name="priority"/>
      	              <field name="gateway_model" invisible="1"/>
      	          </group>
      	          <h2 string="Gateway Hook">Gateway Settings</h2>
      	      </form>
      	  </field>
      </record>

      <record model="ir.ui.view" id="esms_conf_tree_view">
          <field name="name">esms conf tree view</field>
          <field name="model">esms.accounts</field>
          <field name="arch" type="xml">
      	      <tree>
      	          <field name="priority"/>
      	          <field name="name"/>
      	          <field name="account_gateway"/>

      	      </tree>
      	  </field>
      </record>

      <record model="ir.actions.act_window" id="esms_action">
          <field name="name">SMS Gateway Accounts</field>
      	  <field name="res_model">esms.accounts</field>
      	  <field name="view_type">form</field>
      	  <field name="view_mode">tree,form</field>
      	  <field name="help" type="html">
	      <p class="oe_view_nocontent_create">Add SMS Gateway Accounts</p>
	  </field>
      </record>
      
<!-- ##################################################################################################### -->       
      
      <record model="ir.ui.view" id="esms_history_form_view">
          <field name="name">esms history form view</field>
          <field name="model">esms.history</field>
          <field name="arch" type="xml">
      	      <form create="false" edit="false">
      	          <group>
      	              <field name="my_date"/>
      	              <field name="sms_gateway_message_id"/>
      	              <field name="account_id" options="{'no_open': True}"/>
      	              <field name="model_id" options="{'no_open': True}"/>
      	              <field name="model_name"/>
      	              <field name="field_id" options="{'no_open': True}"/>
      	              <field name="record_id"/>
      	              <field name="create_uid"/>
      	              <field name="direction"/>
      	              <field name="record_name"/>
      	              <field name="from_mobile"/>
      	              <field name="to_mobile"/>
      	              <field name="status_string"/>
      	              <field name="status_code"/>
      	              <field name="sms_content"/>
      	          </group>
      	      </form>
      	  </field>
      </record>

      <record model="ir.ui.view" id="esms_history_tree_view">
          <field name="name">esms history tree view</field>
          <field name="model">esms.history</field>
          <field name="arch" type="xml">
      	      <tree edit="false" create="false">
      	          <field name="create_uid" string="By"/>
      	          <field name="account_id"/>
      	          <field name="record_name"/>
      	          <field name="direction"/>
      	          <field name="my_date"/>
      	          <field name="from_mobile"/>
      	          <field name="to_mobile"/>
      	          <field name="status_code"/>
      	          <field name="sms_content"/>
      	      </tree>
      	  </field>
      </record>
      
      <record model="ir.actions.act_window" id="esms_history_action">
          <field name="name">SMS history</field>
          <field name="res_model">esms.history</field>
          <field name="view_type">form</field>
          <field name="view_mode">tree,form</field>
          <field name="help" type="html">
      	      <p class="oe_view_nocontent_create">SMS History</p>
      	  </field>
      </record>

      <record model="ir.actions.act_window" id="esms_user_history_action">
          <field name="name">SMS personal history</field>
          <field name="res_model">esms.history</field>
          <field name="view_type">form</field>
          <field name="view_mode">tree,form</field>
	  <field name="domain">[('create_uid', '=', uid)]</field>
          <field name="help" type="html">
		<p>
                    This list contains SMS messages sent by you.
                </p>
      	  </field>
      </record>
      
      
      <menuitem id="esms_gateway_config_menu" name="SMS Gateway Configuration" parent="base.menu_custom" sequence="80"/>
      <menuitem id="esms_accounts_menu" name="Accounts" parent="esms_gateway_config_menu" action="esms_action" sequence="90"/>
      <menuitem id="esms_history_menu" name="SMS History" parent="esms_gateway_config_menu" action="esms_history_action" sequence="100"/>
        
      <menuitem id="esms_user_history_title" name="SMS" parent="mail.mail_feeds_main" groups="base.group_user"/>
      <record id="esms_user_history_menu" model="ir.ui.menu">
          <field name="name">SMS History</field>
          <field name="sequence" eval="10"/>
          <field name="action" ref="esms_user_history_action"/>
          <field name="parent_id" ref="esms_user_history_title"/>
      </record>
  </data>
</openerp>